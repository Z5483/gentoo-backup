MAKEOPTS="-j2"

# This allows GCC to perform devirtualization across object file boundaries
# using LTO.

DEVIRTLTO="-fdevirtualize-at-ltrans"

# FLTO is of the form -flto[=n] where n is the number of threads to use
# during linking. It's usually a good idea to set this to the number of
# hardware threads in your system

FLTO="-flto=auto -fuse-linker-plugin"

# GRAPHITE contains Graphite specific optimizations and other
# optimizations that are disabled at O3 but don't influence the
# compiler's judgement.

GRAPHITE="-fgraphite-identity -floop-nest-optimize"

# IPAPTA contains -fipa* opts that are disabled by default in GCC.
# These are interprocedural optimizations. For now this is only
# -fipa-pta. This option increases compile times, but can potentially
# produce better binaries, especially with LTO. Essentially, it allows
# the compiler to look into called function bodies when performing alias
# analysis

IPAPTA="-fipa-pta"

# With -fno-semantic-interposition the compiler assumes that if interposition
# happens for functions the overwriting function will have precisely the same
# semantics (and side effects).  Similarly if interposition happens for variables,
# the constructor of the variable will be the same. The flag has no effect for
# functions explicitly declared inline (where it is never allowed for
# interposition to change semantics) and for symbols explicitly declared weak.

SEMINTERPOS="-fno-semantic-interposition"

CC="gcc"
CXX="g++"

CFLAGS="-march=native -O3 ${DEVIRTLTO} ${FLTO} ${GRAPHITE} ${IPAPTA} \
${SEMINTERPOS} -pipe"
CXXFLAGS="${CFLAGS}"
LDFLAGS="${CFLAGS} -fuse-ld=bfd -Wl,-O1 -Wl,--as-needed"

AR="gcc-ar"
NM="gcc-nm"
RANLIB="gcc-ranlib"

CPU_FLAGS_X86="aes avx avx2 f16c fma3 mmx mmxext pclmul popcnt sse \
sse2 sse3 sse4_1 sse4_2 ssse3"

PORTDIR="/var/db/repos/gentoo"

PORTAGE_REPO_DUPLICATE_WARN="0"

PORTAGE_LOGDIR="/var/log/portage"
PORTAGE_LOGDIR_CLEAN="find \"\${PORTAGE_LOGDIR}\" -type f \
! -name \"summary.log*\" -mtime +7 -delete"

EMERGE_LOG_DIR="/var/log"

PORTAGE_TMPDIR="/var/tmp"

DISTDIR="/var/cache/distfiles"
PKGDIR="/var/cache/binpkgs"

INSTALL_MASK="/usr/share/cursors/xorg-x11/Adwaita"

BINPKG_COMPRESS="zstd"
BINPKG_COMPRESS_FLAGS="-3"

PORTAGE_COMPRESS="zstd"
PORTAGE_COMPRESS_FLAGS="-3"

PORTAGE_ELOG_CLASSES="log warn error info"
PORTAGE_ELOG_SYSTEM="save"

PORTAGE_NICENESS="15"
PORTAGE_IONICE_COMMAND="ionice -c 3 -p \${PID}"

EMERGE_DEFAULT_OPTS="--ask --keep-going --with-bdeps=y --verbose"

LC_MESSAGES=C
LINGUAS="en"
L1ON="en_US"

FEATURE="ccache cgroup clean-logs fail-clean parallel-fetch \
parallel-install split-elog split-log"

CCACHE_SIZE="10G"
CCACHE_DIR="/var/tmp/ccache"

CMAKE_MAKEFILE_GENERATOR="ninja"

CURL_SSL="libressl"

FFTOOLS=""

VIDEO_CARDS="intel i965"

INPUT_DEVICES="libinput"

ACCEPT_KEYWORDS="~amd64"

ACCEPT_LICENSE="*"

LLVM_TARGETS="X86"

PYTHON_TARGETS="python3_7 python3_8"
PYTHON_SINGLE_TARGET="python3_7"

QEMU_SOFTMMU_TARGETS="x86_64"
QEMU_USER_TARGETS="x86_64"

RUBY_TARGETS="ruby25 ruby27"

USE="-3dfx -Xaw3d -a52 -aac -aalib -aalib -accessibility -acl -afs     \
-altivec -ao -apache2 -apm -apng -appindicator -aqua -atm -audiofile   \
-audit -avi -ayatana -berkdb -bidi -big-endian -bindist -blas -blas    \
-bluetooth -branding -bzip2 -cairo -calender -canna -caps -cdb -cdda   \
-cddb -cdinstall -cdr -cgi -clamav -colord -connman -consolekit        \
-coreaudio -cracklib -crda -crypt -css -cvs -dav1d -dbi -dbm -dconf    \
-debug -dedicated -deprecated -djvu -doc -dso -dts -dv -dvb -dvd -dvdr \
-eds -elogind -emacs -examples -exif -expat -fam -fastcgi -fbcon -fftw \
-filecaps -firebird -flac -fltk -fontforge -fortran -freetds -freetype \
-freewnn -fuse -gbm -gd -gdbm -geoip -geolocation -ggi -gimp -glut     \
-gmp -gnome -gnome-keyring -gnuplot -gpho2 -gpm -gps -graphviz -gsl    \
-gsm -gstreamer -gtk -gtk-doc -gtk2 -gtk3 -gui -guile -gzip -harfbuzz  \
-hdf5 -hscolour -ibconv -ibm -iconv -idn -ieee1394 -imagemagick -imap  \
-infiniband -inotify -iodbc -ios -ipod -jack -java -javascript -jbig   \
-jemalloc -jit -jpeg2k -kde -kdrive -kerberos -ladspa -lash -latex     \
-ldap -ldns -libass -libav -libcaca -libedit -libffi -libg++ -libmwww  \
-libnotify -libsamplerate -lirc -lm-sensors -lz4 -lzo -m17n-lib -magic \
-matroska -mbox -mikmod -milter -mms -mng -modplug -mono -motif -motif \
-mount -mpeg -mpfr -mpi -mplayer -mssql -mtp -musepack -musicbrainz    \
-mysql -mysqli -nas -neXt -neon -netcdf -netifrc -network -nis -nntp   \
-notifications -nsplugin -objc -objc++ -objc-gc -ocaml -ocamlopt -oci8 \
-odbc -ofx -ogg -opencl -openexr -opus -oracle -oss -pango -pch        \
-pcmcia -pcre -pcre-jit -pda -php -pie -plasma -plotutils -portaudio   \
-postgres -postscript -ppds -ppp -python -qdbm -qmail-app -qt5         \
-quicktime -radius -raw -rdoc -rdp -readline -recode -rss -ruby -samba \
-sasl -sctp -sdl -shm -skey -slang -slang -slp -smartcard -snappy      \
-sndfile -snmp -sound -sox -speex -spell -startup-notification         \
-static-libs -subversion -suid -svga -swig -syslog -systray -szip      \
-taglib -tcl -tcmalloc -telemetry -theora -thin -tidy -tiff -timidity  \
-tk -uchardet -udisks -upnp -upnp-av -upower -v4l -vala -vim-syntax    \
-vorbis -vulkan -wavpack -wayland -webkit -webp -wmf -wxwidgets -xattr \
-xface -xine -xmp -xmpp -xosd -xpm -xscreensaver -xv -xvfb -z3 X adns  \
alsa alsa-plugin asm async asyncns cjk clang compiler-rt cryptsetup    \
cups curl custom-cflags custom-optimization dbus default-compiler-rt   \
default-libcxx default-lld dri drm egl encode ffmpeg fontconfig ftp    \
gallium gif git gles2 gles2-only glib gnuefi gnutls gpg graphite hpn   \
http2 icu imlib initramfs iwd jpeg kms kvm lame lcms libcxx libcxxabi  \
libcxxrt libglvnd libressl libunwind libxml2 llvm lto lua luajit mad   \
minimal modules mp3 ncurses nls nptl openal opengl openh264 orc pam    \
parallel-compiler perl pgo png policykit posix prefix pulseaudio qemu  \
session smp sockets spice split-usr sqlite ssl static-analyzer systemd \
sysv-utils tcpd threads truetype tui udev unicode unwind usb vaapi     \
vdpau vnc wifi xft xinerama xml xorg zeroconf zlib zsh-completion      \
zstd"
