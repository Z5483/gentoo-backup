#!/bin/sh

if [ "$(id -u)" -ne 0 ]; then
	echo "Please run as root."
	exit 0
fi

REPO=$(dirname "$0")

for location in "boot" "etc" "usr" "var"; do
	[ "$(command -v rsync)" ] || {
		echo 'rsync is not founded. is it installed?'
		exit 1
	}

	[ -d "$location" ] && \
		rsync -ahKv "$REPO/$location/" "/$location"
done

for terminfo in "$REPO"/terminfo/*; do
	[ "$(command -v tic)" ] || {
		echo 'tic is not founded. is it installed?'
		exit 1
	}
	tic -sx "$terminfo"
done
